# Sauce Labs

Selenium (desktop browser) and Appium (mobile browser) testing in the cloud using Sauce Labs (https://saucelabs.com).

<img src="https://github.com/Dynatrace/Dynatrace-Test-Automation-Samples/blob/master/saucelabs/img/saucelabs_infographics.png" /> <img src="https://github.com/Dynatrace/Dynatrace-Test-Automation-Samples/blob/master/saucelabs/img/saucelabs.png" width="300" />

## Prerequisite

### easyTravel

* Download the demo application easyTravel: https://community.dynatrace.com/community/display/DL/Demo+Applications+-+easyTravel
* Follow the installation & configuration steps: https://community.dynatrace.com/community/display/DL/Demo+Applications+-+easyTravel#DemoApplications-easyTravel-InstallingeasyTravel
* easyTravel portal needs to run on a server which is reachable from the outside
* if that's is not possible, you can run it locally (e.g. http://localhost:8079/) but need to configure a proxy within Sauce Labs (https://saucelabs.com/beta/tunnels)

### Sauce Labs

* Register for a Free Trial of Sauce Labs: https://saucelabs.com
* Add your user name and access key in the file SeleniumHelper.java

<img src="https://github.com/Dynatrace/Dynatrace-Test-Automation-Samples/blob/master/saucelabs/img/saucelabs_accesskey.png" />

### Others

* Java JDK
* Ant

## Sample

The sample runs one simple use case (log-in with user greta, click on a few pages, log-out) in multiple browsers (desktop and mobile).

* [Code](./code/)
* External libraries: 
  * [selenium, json, saucelabs, ...](./code/lib/) 
* [Dynatrace Ant library](./code/lib/dynaTrace) - required only for option 2, see also https://community.dynatrace.com/community/display/DL/Automation+Library+%28Ant%2C+Maven%29+for+Dynatrace

#### Preparation

```
git clone https://github.com/Dynatrace/Dynatrace-Test-Automation-Samples
C:\YOURDIR> Set JAVA_HOME=YOUR JAVA HOME
C:\YOURDIR> Set PATH=%PATH%;ANTHOME\bin
```

* update Sauce labs credentials in the file SeleniumHelper.java
* update AppMon Server access and credentials in the file build.xml (only required for second option)

#### Run

* Start easyTravel (only web required, Standard scenario, manual visits)
* Make sure the agents are connected to your Dynatrace AppMon server

*Option 1*: Execute with automatic test number (no test run registration to AppMon Server)
```
C:\YOURDIR\saucelabs> ant test
```

*Option 2*: Execute with Register Test Run REST CALL (to pass AppMon Server meta data such as build & version information)
```
C:\YOURDIR\saucelabs> ant register-test
```

#### Result


*Option 1*: Run the sample with Ant without test registration (auto-registred test run generated by Dynatrace AppMon Server)



*Option 2*: Run the sample with Ant with test registration (to pass Dynatrace AppMon Server meta data such as build & version information)


